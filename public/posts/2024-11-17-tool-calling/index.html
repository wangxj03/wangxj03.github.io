<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Enhancing LLM Tool Calling | Xiaojing's Blog</title>
<meta name=keywords content="AI"><meta name=description content="Tool calling is a critical capability that allows Large Language Models (LLMs) to interact with external systems and perform complex tasks. In this post, we&rsquo;ll explore practical strategies to enhance LLM tool calling through the lens of building a text-to-SQL application.
A Text-to-SQL Case Study Our example application provides a natural language interface to query Hacker news compiled by Mother Duck. The dataset contains user posts, comments, and votes from most of 2022."><meta name=author content="Xiaojing Wang"><link rel=canonical href=http://localhost:1313/posts/2024-11-17-tool-calling/><meta name=google-site-verification content="G-NX22EB1PRP"><link crossorigin=anonymous href=/assets/css/stylesheet.e7c811b1152f0ea0017b0724f2c040700cf8bf84343fd4fd5eca45af82337db9.css integrity="sha256-58gRsRUvDqABewck8sBAcAz4v4Q0P9T9XspFr4Izfbk=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/2024-11-17-tool-calling/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Enhancing LLM Tool Calling"><meta property="og:description" content="Tool calling is a critical capability that allows Large Language Models (LLMs) to interact with external systems and perform complex tasks. In this post, we&rsquo;ll explore practical strategies to enhance LLM tool calling through the lens of building a text-to-SQL application.
A Text-to-SQL Case Study Our example application provides a natural language interface to query Hacker news compiled by Mother Duck. The dataset contains user posts, comments, and votes from most of 2022."><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/2024-11-17-tool-calling/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-17T20:37:57-08:00"><meta property="article:modified_time" content="2024-11-17T20:37:57-08:00"><meta property="og:site_name" content="Xiaojing's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Enhancing LLM Tool Calling"><meta name=twitter:description content="Tool calling is a critical capability that allows Large Language Models (LLMs) to interact with external systems and perform complex tasks. In this post, we&rsquo;ll explore practical strategies to enhance LLM tool calling through the lens of building a text-to-SQL application.
A Text-to-SQL Case Study Our example application provides a natural language interface to query Hacker news compiled by Mother Duck. The dataset contains user posts, comments, and votes from most of 2022."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Enhancing LLM Tool Calling","item":"http://localhost:1313/posts/2024-11-17-tool-calling/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Enhancing LLM Tool Calling","name":"Enhancing LLM Tool Calling","description":"Tool calling is a critical capability that allows Large Language Models (LLMs) to interact with external systems and perform complex tasks. In this post, we\u0026rsquo;ll explore practical strategies to enhance LLM tool calling through the lens of building a text-to-SQL application.\nA Text-to-SQL Case Study Our example application provides a natural language interface to query Hacker news compiled by Mother Duck. The dataset contains user posts, comments, and votes from most of 2022.","keywords":["AI"],"articleBody":"Tool calling is a critical capability that allows Large Language Models (LLMs) to interact with external systems and perform complex tasks. In this post, we’ll explore practical strategies to enhance LLM tool calling through the lens of building a text-to-SQL application.\nA Text-to-SQL Case Study Our example application provides a natural language interface to query Hacker news compiled by Mother Duck. The dataset contains user posts, comments, and votes from most of 2022. Using DuckDB as the database engine, our application translates user queries into SQL, executes them, and returns the results in natural language.\nHere’s the core function that executes SQL queries against the Hacker news dataset:\nimport duckdb from duckdb import DuckDBPyConnection def get_connection() -\u003e DuckDBPyConnection: global con if con is None: con = duckdb.connect(\":memory:\") con.execute(\"\"\" CREATE TABLE IF NOT EXISTS posts AS SELECT * FROM read_parquet('data/hacker_news.parquet'); \"\"\") return con def run_sql(query: str) -\u003e str: \"\"\"Run DuckDB SQL query against Hacker news table `posts` and return the result as a JSON string.\"\"\" con = get_connection() df = con.sql(query).fetchdf() # Truncate the result if it's too long if len(df) \u003e 100: logging.warning( f\"The result contains {len(df)} rows. Only returning the first 100.\" ) df = df.head(100) return df.to_json(orient=\"records\") The diagram below shows the full lifecycle of a user query:\nWhen It Works Simple queries like “What are the most commented posts?” work beautifully. The LLM generates straightforward SQL:\nSELECT title, comments FROM posts ORDER BY comments DESC LIMIT 10; This query retrieves the top posts by comment count and returns the results in a formatted markdown list:\nWhen Things Get Tricky However, seemingly minor increases in complexity can trip up the LLM. Consider “What are the most commented posts each month?”. The query requires advanced SQL features like subqueries or window functions. Below are some incorrect SQL queries generated by the LLM:\nIncorrect HAVING clause:\nSELECT strftime('%Y-%m', timestamp) as month, MAX(comments) as max_comments, title FROM posts GROUP BY month, title HAVING comments = (SELECT MAX(comments) FROM posts WHERE strftime('%Y-%m', timestamp) = month) ORDER BY month; Unnecessary outer query\nSELECT strftime(timestamp, '%Y-%m') as month, title, comments FROM ( SELECT month, title, comments, ROW_NUMBER() OVER (PARTITION BY month ORDER BY comments DESC) as rn FROM ( SELECT strftime(timestamp, '%Y-%m') as month, title, comments FROM posts ) ) WHERE rn = 1; Tips to Improve Tool Calling This brings us to 3 practical tips to enhance LLM tool calling:\n1. Retry on Error When LLMs fail at tool calling, they are likely to progress further by retrying with error feedback. Anthropic’s recent computer use demo illustrated this beautifully – their Claude model initially failed to start a Python server but succeeded after analyzing the error and adjusting its Python version.\nIn our monthly top posts query example, this Langfuse trace illustrates a case where the initial SQL query was syntatically incorrect:\nSELECT STRFTIME(timestamp, '%Y-%m') AS month, title, MAX(comments) as max_comments FROM posts GROUP BY month ORDER BY month; Executing the query against the DuckDB database returned an error:\nBinder Error: column \"title\" must appear in the GROUP BY clause or must be part of an aggregate function. Either add it to the GROUP BY list, or use \"ANY_VALUE(title)\" if the exact value of \"title\" is not important. Feeding the DuckDB error message back to the LLM eventually lead to a correct solution:\nSELECT month, title, comments FROM ( SELECT STRFTIME(timestamp, '%Y-%m') AS month, title, comments, ROW_NUMBER() OVER (PARTITION BY STRFTIME(timestamp, '%Y-%m') ORDER BY comments DESC) as rn FROM posts ) WHERE rn = 1; 2. Allow More Thinking Time The discussion about the inference scaling law has gained significant traction lately, as highlighted in both Jim Fan’s influential tweet and Sequoia’s blog post Generative AI’s Act o1. The law suggests that the performance of a model improves with more computing time spent on inference.\nWe can leverage this insight by adding an explicit reasoning step before tool calling. For our monthly top posts query, this Langfuse trace captures a case where the tasks was broken into three logical steps:\nExtract the year and month from the timestamp to group the data on a monthly basis. Rank the posts within each month based on the number of comments to identify the most commented one. Filter the top-ranked post for each month. This structured thinking lead to a correct final SQL query, even being slightly verbose:\nWITH posts_with_month AS ( SELECT title, comments, EXTRACT(YEAR FROM timestamp) AS year, EXTRACT(MONTH FROM timestamp) AS month FROM posts ), ranked_posts AS ( SELECT title, comments, year, month, ROW_NUMBER() OVER (PARTITION BY year, month ORDER BY comments DESC) AS rank FROM posts_with_month ) SELECT title, comments, year, month FROM ranked_posts WHERE rank = 1 ORDER BY year, month; 3. Use Few-shot Learning Providing relevant examples in the prompt is a cheap but effective way to improve tool calling performance. DuckDB’s documentation already contains many SQL snippets, we can readily use them as examples. Here we leverage the instructor package to parse these examples into the Pydantic model below. We then index the example embeddings into a vector database and retrieve the most similar examples at inference time.\nclass Example(BaseModel): task: str = Field( ..., description=\"Description of the task that is to be solved by the SQL query\" ) sql: str = Field(..., description=\"DuckDB SQL query to solve the task\") explanation: str = Field( ..., description=\"Generic explanation of the query syntax found in the surrounding markdown\", ) For monthly top posts query example, this Langfuse trace captures a case where one of the 10 retrieved examples was about the QUALIFY clause. Using the clause, LLM managed to generate a correct and highly efficient SQL query, demonstrating the power of few-shot learning.\nSELECT DATE_TRUNC('month', timestamp) as month, title, comments FROM posts WHERE comments IS NOT NULL QUALIFY ROW_NUMBER() OVER (PARTITION BY DATE_TRUNC('month', timestamp) ORDER BY comments DESC) = 1; LLM Observability: The Hidden Superpower LLM observability platforms like Langfuse, Langsmith, and braintrust provide crucial insights into the reasoning process and interactions with tools. These platforms capture traces of LLM API calls and responses, vector database interactions, and local function execution. You can also embrace the tools to measure step-by-step latency and end-to-end latency. This visibility is invaluable for debugging and optimizing LLM tool calling.\nTakeaways Creating reliable LLM-powered tools requires a thoughtful approach:\nUse errors as learning opportunities Allow more thinking time and structured reasoning Leverage few-shot examples By combining these strategies with proper observability, we can create robust AI systems that handle complex real-world tasks reliably.\nWant to explore further? Check out the complete source code at https://github.com/wangxj03/ai-cookbook/tree/main/hacker-news-bot.\nHappy building!\n","wordCount":"1091","inLanguage":"en","datePublished":"2024-11-17T20:37:57-08:00","dateModified":"2024-11-17T20:37:57-08:00","author":{"@type":"Person","name":"Xiaojing Wang"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/2024-11-17-tool-calling/"},"publisher":{"@type":"Organization","name":"Xiaojing's Blog","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Home (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/posts/ title=Posts><span>Posts</span></a></li><li><a href=http://localhost:1313/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Enhancing LLM Tool Calling</h1><div class=post-meta><span title='2024-11-17 20:37:57 -0800 PST'>November 17, 2024</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;Xiaojing Wang</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#a-text-to-sql-case-study>A Text-to-SQL Case Study</a><ul><li><a href=#when-it-works>When It Works</a></li><li><a href=#when-things-get-tricky>When Things Get Tricky</a></li></ul></li><li><a href=#tips-to-improve-tool-calling>Tips to Improve Tool Calling</a><ul><li><a href=#1-retry-on-error>1. Retry on Error</a></li><li><a href=#2-allow-more-thinking-time>2. Allow More Thinking Time</a></li><li><a href=#3-use-few-shot-learning>3. Use Few-shot Learning</a></li></ul></li><li><a href=#llm-observability-the-hidden-superpower>LLM Observability: The Hidden Superpower</a></li><li><a href=#takeaways>Takeaways</a></li></ul></nav></div></details></div><div class=post-content><p>Tool calling is a critical capability that allows Large Language Models (LLMs) to interact with external systems and perform complex tasks. In this post, we&rsquo;ll explore practical strategies to enhance LLM tool calling through the lens of building a text-to-SQL application.</p><h2 id=a-text-to-sql-case-study>A Text-to-SQL Case Study<a hidden class=anchor aria-hidden=true href=#a-text-to-sql-case-study>#</a></h2><p>Our example application provides a natural language interface to query <a href=https://motherduck.com/docs/getting-started/sample-data-queries/hacker-news/>Hacker news</a> compiled by <a href=https://motherduck.com/>Mother Duck</a>. The dataset contains user posts, comments, and votes from most of 2022. Using <a href=https://github.com/duckdb/duckdb>DuckDB</a> as the database engine, our application translates user queries into SQL, executes them, and returns the results in natural language.</p><p>Here&rsquo;s the core function that executes SQL queries against the Hacker news dataset:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> duckdb
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> duckdb <span style=color:#f92672>import</span> DuckDBPyConnection
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get_connection</span>() <span style=color:#f92672>-&gt;</span> DuckDBPyConnection:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>global</span> con
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> con <span style=color:#f92672>is</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>        con <span style=color:#f92672>=</span> duckdb<span style=color:#f92672>.</span>connect(<span style=color:#e6db74>&#34;:memory:&#34;</span>)
</span></span><span style=display:flex><span>        con<span style=color:#f92672>.</span>execute(<span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>CREATE TABLE IF NOT EXISTS posts AS
</span></span></span><span style=display:flex><span><span style=color:#e6db74>SELECT * FROM read_parquet(&#39;data/hacker_news.parquet&#39;);
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> con
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run_sql</span>(query: str) <span style=color:#f92672>-&gt;</span> str:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;Run DuckDB SQL query against Hacker news table `posts` and return the result as a JSON string.&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    con <span style=color:#f92672>=</span> get_connection()
</span></span><span style=display:flex><span>    df <span style=color:#f92672>=</span> con<span style=color:#f92672>.</span>sql(query)<span style=color:#f92672>.</span>fetchdf()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Truncate the result if it&#39;s too long</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> len(df) <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>100</span>:
</span></span><span style=display:flex><span>        logging<span style=color:#f92672>.</span>warning(
</span></span><span style=display:flex><span>            <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;The result contains </span><span style=color:#e6db74>{</span>len(df)<span style=color:#e6db74>}</span><span style=color:#e6db74> rows. Only returning the first 100.&#34;</span>
</span></span><span style=display:flex><span>        )
</span></span><span style=display:flex><span>        df <span style=color:#f92672>=</span> df<span style=color:#f92672>.</span>head(<span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> df<span style=color:#f92672>.</span>to_json(orient<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;records&#34;</span>)
</span></span></code></pre></div><p>The diagram below shows the full lifecycle of a user query:</p><p><img loading=lazy src=function_call.png alt="alt text"></p><h3 id=when-it-works>When It Works<a hidden class=anchor aria-hidden=true href=#when-it-works>#</a></h3><p>Simple queries like &ldquo;What are the most commented posts?&rdquo; work beautifully. The LLM generates straightforward SQL:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> title, comments
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> posts
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> comments <span style=color:#66d9ef>DESC</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>10</span>;
</span></span></code></pre></div><p>This query retrieves the top posts by comment count and returns the results in a formatted markdown list:</p><p><img loading=lazy src=most_commented.png alt="alt text"></p><h3 id=when-things-get-tricky>When Things Get Tricky<a hidden class=anchor aria-hidden=true href=#when-things-get-tricky>#</a></h3><p>However, seemingly minor increases in complexity can trip up the LLM. Consider &ldquo;What are the most commented posts each month?&rdquo;. The query requires advanced SQL features like subqueries or window functions. Below are some incorrect SQL queries generated by the LLM:</p><ul><li><p>Incorrect <code>HAVING</code> clause:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> strftime(<span style=color:#e6db74>&#39;%Y-%m&#39;</span>, <span style=color:#66d9ef>timestamp</span>) <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>month</span>, <span style=color:#66d9ef>MAX</span>(comments) <span style=color:#66d9ef>as</span> max_comments, title
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> posts
</span></span><span style=display:flex><span><span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>month</span>, title
</span></span><span style=display:flex><span><span style=color:#66d9ef>HAVING</span> comments <span style=color:#f92672>=</span> (<span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>MAX</span>(comments) <span style=color:#66d9ef>FROM</span> posts <span style=color:#66d9ef>WHERE</span> strftime(<span style=color:#e6db74>&#39;%Y-%m&#39;</span>, <span style=color:#66d9ef>timestamp</span>) <span style=color:#f92672>=</span> <span style=color:#66d9ef>month</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>month</span>;
</span></span></code></pre></div></li><li><p>Unnecessary outer query</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> strftime(<span style=color:#66d9ef>timestamp</span>, <span style=color:#e6db74>&#39;%Y-%m&#39;</span>) <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>month</span>, title, comments
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> (
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>month</span>, title, comments,
</span></span><span style=display:flex><span>  ROW_NUMBER() OVER (PARTITION <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>month</span> <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> comments <span style=color:#66d9ef>DESC</span>) <span style=color:#66d9ef>as</span> rn
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>FROM</span> (
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>SELECT</span> strftime(<span style=color:#66d9ef>timestamp</span>, <span style=color:#e6db74>&#39;%Y-%m&#39;</span>) <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>month</span>, title, comments
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>FROM</span> posts
</span></span><span style=display:flex><span>  )
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> rn <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span></code></pre></div></li></ul><h2 id=tips-to-improve-tool-calling>Tips to Improve Tool Calling<a hidden class=anchor aria-hidden=true href=#tips-to-improve-tool-calling>#</a></h2><p>This brings us to 3 practical tips to enhance LLM tool calling:</p><h3 id=1-retry-on-error>1. Retry on Error<a hidden class=anchor aria-hidden=true href=#1-retry-on-error>#</a></h3><p>When LLMs fail at tool calling, they are likely to progress further by retrying with error feedback. Anthropic&rsquo;s recent <a href=https://www.anthropic.com/news/3-5-models-and-computer-use>computer use</a> <a href="https://youtu.be/vH2f7cjXjKI?si=wnxDU5zddltCLynY&amp;t=122">demo</a> illustrated this beautifully &ndash; their Claude model initially failed to start a Python server but succeeded after analyzing the error and adjusting its Python version.</p><p><img loading=lazy src=claude_computer_use_for_coding.png alt="alt text"></p><p>In our monthly top posts query example, this Langfuse <a href=https://us.cloud.langfuse.com/project/cm27ro2si00cd8mi56o0af4bq/traces/1eafe226-882e-4d52-aef0-390abbc1b181>trace</a> illustrates a case where the initial SQL query was syntatically incorrect:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> STRFTIME(<span style=color:#66d9ef>timestamp</span>, <span style=color:#e6db74>&#39;%Y-%m&#39;</span>) <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>month</span>, title, <span style=color:#66d9ef>MAX</span>(comments) <span style=color:#66d9ef>as</span> max_comments
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> posts
</span></span><span style=display:flex><span><span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>month</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>month</span>;
</span></span></code></pre></div><p>Executing the query against the DuckDB database returned an error:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>Binder Error: column <span style=color:#e6db74>&#34;title&#34;</span> must appear in the GROUP BY clause or must be part of an aggregate <span style=color:#66d9ef>function</span>. Either add it to the GROUP BY list, or use <span style=color:#e6db74>&#34;ANY_VALUE(title)&#34;</span> <span style=color:#66d9ef>if</span> the exact value of <span style=color:#e6db74>&#34;title&#34;</span> is not important.
</span></span></code></pre></div><p>Feeding the DuckDB error message back to the LLM eventually lead to a correct solution:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>month</span>, title, comments <span style=color:#66d9ef>FROM</span> (
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>SELECT</span> STRFTIME(<span style=color:#66d9ef>timestamp</span>, <span style=color:#e6db74>&#39;%Y-%m&#39;</span>) <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>month</span>, title, comments,
</span></span><span style=display:flex><span>           ROW_NUMBER() OVER (PARTITION <span style=color:#66d9ef>BY</span> STRFTIME(<span style=color:#66d9ef>timestamp</span>, <span style=color:#e6db74>&#39;%Y-%m&#39;</span>) <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> comments <span style=color:#66d9ef>DESC</span>) <span style=color:#66d9ef>as</span> rn
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>FROM</span> posts
</span></span><span style=display:flex><span>) <span style=color:#66d9ef>WHERE</span> rn <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span></code></pre></div><h3 id=2-allow-more-thinking-time>2. Allow More Thinking Time<a hidden class=anchor aria-hidden=true href=#2-allow-more-thinking-time>#</a></h3><p>The discussion about the inference scaling law has gained significant traction lately, as highlighted in both Jim Fan&rsquo;s influential <a href=https://x.com/DrJimFan/status/1834279865933332752>tweet</a> and Sequoia&rsquo;s blog post <a href=https://www.sequoiacap.com/article/generative-ais-act-o1/>Generative AI’s Act o1</a>. The law suggests that the performance of a model improves with more computing time spent on inference.</p><p>We can leverage this insight by adding an explicit reasoning step before tool calling. For our monthly top posts query, this Langfuse <a href=https://us.cloud.langfuse.com/project/cm27ro2si00cd8mi56o0af4bq/traces/69bd6cfc-c8b6-4960-a3ef-08d6f4b06a73>trace</a> captures a case where the tasks was broken into three logical steps:</p><ol><li><strong>Extract the year and month</strong> from the <code>timestamp</code> to group the data on a monthly basis.</li><li><strong>Rank the posts</strong> within each month based on the number of comments to identify the most commented one.</li><li><strong>Filter</strong> the top-ranked post for each month.</li></ol><p>This structured thinking lead to a correct final SQL query, even being slightly verbose:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>WITH</span> posts_with_month <span style=color:#66d9ef>AS</span> (
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>        title,
</span></span><span style=display:flex><span>        comments,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>EXTRACT</span>(<span style=color:#66d9ef>YEAR</span> <span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>timestamp</span>) <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>year</span>,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>EXTRACT</span>(<span style=color:#66d9ef>MONTH</span> <span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>timestamp</span>) <span style=color:#66d9ef>AS</span> <span style=color:#66d9ef>month</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>        posts
</span></span><span style=display:flex><span>),
</span></span><span style=display:flex><span>ranked_posts <span style=color:#66d9ef>AS</span> (
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>        title,
</span></span><span style=display:flex><span>        comments,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>year</span>,
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>month</span>,
</span></span><span style=display:flex><span>        ROW_NUMBER() OVER (PARTITION <span style=color:#66d9ef>BY</span> <span style=color:#66d9ef>year</span>, <span style=color:#66d9ef>month</span> <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> comments <span style=color:#66d9ef>DESC</span>) <span style=color:#66d9ef>AS</span> rank
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>        posts_with_month
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>    title,
</span></span><span style=display:flex><span>    comments,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>year</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>month</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span>
</span></span><span style=display:flex><span>    ranked_posts
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span>
</span></span><span style=display:flex><span>    rank <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>year</span>, <span style=color:#66d9ef>month</span>;
</span></span></code></pre></div><h3 id=3-use-few-shot-learning>3. Use Few-shot Learning<a hidden class=anchor aria-hidden=true href=#3-use-few-shot-learning>#</a></h3><p>Providing relevant examples in the prompt is a cheap but effective way to improve tool calling performance. DuckDB&rsquo;s <a href=https://duckdb.org/docs/sql/introduction>documentation</a> already contains many SQL snippets, we can readily use them as examples. Here we leverage the <a href=https://github.com/instructor-ai/instructor>instructor</a> package to parse these examples into the Pydantic model below. We then index the example embeddings into a vector database and retrieve the most similar examples at inference time.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Example</span>(BaseModel):
</span></span><span style=display:flex><span>    task: str <span style=color:#f92672>=</span> Field(
</span></span><span style=display:flex><span>        <span style=color:#f92672>...</span>, description<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Description of the task that is to be solved by the SQL query&#34;</span>
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>    sql: str <span style=color:#f92672>=</span> Field(<span style=color:#f92672>...</span>, description<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;DuckDB SQL query to solve the task&#34;</span>)
</span></span><span style=display:flex><span>    explanation: str <span style=color:#f92672>=</span> Field(
</span></span><span style=display:flex><span>        <span style=color:#f92672>...</span>,
</span></span><span style=display:flex><span>        description<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Generic explanation of the query syntax found in the surrounding markdown&#34;</span>,
</span></span><span style=display:flex><span>    )
</span></span></code></pre></div><p>For monthly top posts query example, this Langfuse <a href=https://us.cloud.langfuse.com/project/cm27ro2si00cd8mi56o0af4bq/traces/e8956c34-6569-4324-ad4e-3b0be153b9e2>trace</a> captures a case where <a href=https://duckdb.org/docs/sql/query_syntax/qualify.html#examples>one</a> of the 10 retrieved examples was about the <code>QUALIFY</code> clause. Using the clause, LLM managed to generate a correct and highly efficient SQL query, demonstrating the power of few-shot learning.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> DATE_TRUNC(<span style=color:#e6db74>&#39;month&#39;</span>, <span style=color:#66d9ef>timestamp</span>) <span style=color:#66d9ef>as</span> <span style=color:#66d9ef>month</span>, title, comments
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> posts
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> comments <span style=color:#66d9ef>IS</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>NULL</span>
</span></span><span style=display:flex><span>QUALIFY ROW_NUMBER() OVER (PARTITION <span style=color:#66d9ef>BY</span> DATE_TRUNC(<span style=color:#e6db74>&#39;month&#39;</span>, <span style=color:#66d9ef>timestamp</span>) <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> comments <span style=color:#66d9ef>DESC</span>) <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span></code></pre></div><h2 id=llm-observability-the-hidden-superpower>LLM Observability: The Hidden Superpower<a hidden class=anchor aria-hidden=true href=#llm-observability-the-hidden-superpower>#</a></h2><p>LLM observability platforms like <a href=https://langfuse.com/>Langfuse</a>, <a href=https://www.langchain.com/langsmith>Langsmith</a>, and <a href=https://www.braintrust.dev/docs/guides/tracing>braintrust</a> provide crucial insights into the reasoning process and interactions with tools. These platforms capture traces of LLM API calls and responses, vector database interactions, and local function execution. You can also embrace the tools to measure step-by-step latency and end-to-end latency. This visibility is invaluable for debugging and optimizing LLM tool calling.</p><h2 id=takeaways>Takeaways<a hidden class=anchor aria-hidden=true href=#takeaways>#</a></h2><p>Creating reliable LLM-powered tools requires a thoughtful approach:</p><ul><li>Use errors as learning opportunities</li><li>Allow more thinking time and structured reasoning</li><li>Leverage few-shot examples</li></ul><p>By combining these strategies with proper observability, we can create robust AI systems that handle complex real-world tasks reliably.</p><p>Want to explore further? Check out the complete source code at <a href=https://github.com/wangxj03/ai-cookbook/tree/main/hacker-news-bot>https://github.com/wangxj03/ai-cookbook/tree/main/hacker-news-bot</a>.</p><p>Happy building!</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/ai/>AI</a></li></ul><nav class=paginav><a class=next href=http://localhost:1313/posts/2024-11-08-schema-generation/><span class=title>Next »</span><br><span>Schema Generation for LLM Function Calling</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Enhancing LLM Tool Calling on x" href="https://x.com/intent/tweet/?text=Enhancing%20LLM%20Tool%20Calling&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2f2024-11-17-tool-calling%2f&amp;hashtags=AI"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Enhancing LLM Tool Calling on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2f2024-11-17-tool-calling%2f&amp;title=Enhancing%20LLM%20Tool%20Calling&amp;summary=Enhancing%20LLM%20Tool%20Calling&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2f2024-11-17-tool-calling%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Enhancing LLM Tool Calling on reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2f2024-11-17-tool-calling%2f&title=Enhancing%20LLM%20Tool%20Calling"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Enhancing LLM Tool Calling on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2f2024-11-17-tool-calling%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Enhancing LLM Tool Calling on whatsapp" href="https://api.whatsapp.com/send?text=Enhancing%20LLM%20Tool%20Calling%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2f2024-11-17-tool-calling%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Enhancing LLM Tool Calling on telegram" href="https://telegram.me/share/url?text=Enhancing%20LLM%20Tool%20Calling&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2f2024-11-17-tool-calling%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Enhancing LLM Tool Calling on ycombinator" href="https://news.ycombinator.com/submitlink?t=Enhancing%20LLM%20Tool%20Calling&u=http%3a%2f%2flocalhost%3a1313%2fposts%2f2024-11-17-tool-calling%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>Xiaojing's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>